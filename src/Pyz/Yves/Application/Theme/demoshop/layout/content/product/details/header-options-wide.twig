{% if product is defined %}

    {% set productConcrete = product.concreteProducts | first %}
    {% set initial = (pricings | first) %}

    <script type="text/javascript">
        window.pricings = {
        {% for weight, pricing in pricings %}
            '{{ weight }}' : {
                absolute: '{{ pricing.absolute | price}}',
                relative: '250g (€1.40 / 100g)'
            }{% if loop.last != true %},{% endif %}
        {% endfor %}
        }
    </script>

    <form action="/cart/add/" method="POST" data-sku="{{ productConcrete.sku }}" class="product-header js-product-options">

        <div class="product-header__info">
            <h2 class="product-header__title">{{ product.abstract_name }}</h2>
            <div class="product-header__weight">{{ initial.weight }}</div>
        </div>

        <div class="product-header__interaction">
            {% if options is not empty %}
                {% set option = options | first %}
                <div class="product-header__select">
                    {% include  '@application/layout/common/forms/dropdown.twig' with {
                        label: 'Größe',
                        id: 'weight',
                        name: 'weight',
                        options: option.weight
                    } %}
                </div>
            {% endif %}

            <div class="product-header__select">
                {% include  '@application/layout/common/forms/stepper.twig' with {
                    label: 'Anzahl',
                    id: 'quantity',
                    name: 'quantity'
                } %}
            </div>

            <div class="product-header__pricing">
                {% set initial = (pricings | first ) %}

                <div class="product-header__total">
                    {{ initial.absolute | price}}
                </div>

                <div class="product-header__relative">
                    <span class="js-product-weight">{{ initial.weight }}</span>{{ ('unit.' ~ initial.unit | trim) | trans }} ({{ initial.relative | price }} / {{ initial.unit == 'ml' or initial.unit == 'g' ? 100 : 1 }}{{ initial.unit }})
                </div>
            </div>

            {% include '@application/layout/common/forms/button.twig' with {
                type: 'submit',
                title: 'In den Warenkorb',
                modifier: 'cta product-options__button button'
            } %}
        </div>


        <div class="product-header__delivery">
            <div class="product-header__delivery-status">
                Sofort verfügbar.
            </div>

            <div class="product-header__delivery-info">
                Versand erfolgt für Bestellungen bis 12.00 Uhr Mo-Do normalerweise am selben Tag.
            </div>
        </div>
    </form>
{% endif %}
