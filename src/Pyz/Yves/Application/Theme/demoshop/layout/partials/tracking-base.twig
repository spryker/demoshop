
{% autoescape false %}
  <script>

    window.dataLayer = [];

    dataLayerManager = {
      isNonProduction: function () {
          return ('{{  environment }}' !== 'production');
      },
      isNonDevelopment: function () {
          return ('{{  environment }}' !== 'development');
      },

      add: function (data) {
        Object.keys(data).forEach(function (key) {
          var trackingElement = {};
          trackingElement[key] = data[key];
          window.dataLayer.push(trackingElement);
        });

        if (dataLayerManager.isNonProduction()) {
          console.log('dataLayer:' , window.dataLayer);
          console.log('dataLayer:' , JSON.stringify(window.dataLayer, true, 2));
        }
      }
    };
  </script>
{% endautoescape %}
